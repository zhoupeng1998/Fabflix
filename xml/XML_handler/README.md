# New Movie Data From Stanfrod Movie Database
This data set is parsed from Stanford Movie Database XML file, and designed as a supplemental data set for moviedb for CS 122b course in UCI.
Author: Zhou, Peng  pzhou2@uci.edu

## Version 2.0
### Improvements / Optimizations
1. Generating all outputs into csv files, which makes data insertion in mysql a lot faster.
2. When comparing xml info to exising info of database (need to check whether the star already exists in database, and need to get star id when parsing casts.xml), downloading the entire star table and put it into a hashmap makes the comparison more efficient.

### Easy install
1. Change every <your_path> in LoadNewDataCmd.sql to your absolute path of your downloaded NewData directory.
2. Log into mysql using "mysql -u mytestuser -p" command.
3. Enter command "source /<your_path>/LoadNewDataCmd". 
4. If the command above returns error "The used command is not allowed with this MySQL version", logout, and login to mysql again with command "mysql --local-infile=1 -u mytestuser -p", then execute step 3 again.

### Generating csv files in Eclipse
1. Import XML_handler into your IDE.
2. Replace all file paths (.xml input file and .csv output file) to your desired file paths.
3. Run "Main.java".
4. Load "NewStarInMovies.csv" into moviedb.

### Generating csv files in maven
1. cd XML_handler
2. mvn compile
3. mvn exec:java -Dexec.mainClass="Main"

## Version 1.0 (Deprecated)
### Easy install
1. Change every <your_path> in LoadNewDataCmd.sql to your absolute path of your downloaded NewData directory.
2. Log into mysql using "mysql -u mytestuser -p" command.
3. Enter command "source /<your_path>/LoadNewDataCmd". 
4. If the command above returns error "The used command is not allowed with this MySQL version", logout, and login to mysql again with command "mysql --local-infile=1 -u mytestuser -p", then execute step 3 again.

### Generating csv files
1. Import XML_handler into your IDE.
2. Replace all file paths (.xml input file and .csv output file) to your desired file paths.
3. Run "StarsParser.java" and "MainParser.java".
NOTE: Running "StarsParser.java" is slow, because the program has to check whether each of the stars in input file is already in moviedb.
4. Load all .csv files generated by above programs into moviedb, using the commands and mysql login method mentioned in "Easy install" section.
5. Run "CastParser.java".
NOTE: Running this step is extremely slow, and it must be run after finishing all steps above, because it must check all new data loaded into moviedb to match each star in movie with its id in moviedb.
6. Load "NewStarInMovies.csv" into moviedb.
